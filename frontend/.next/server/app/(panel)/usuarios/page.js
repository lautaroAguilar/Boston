(()=>{var e={};e.id=748,e.ids=[748],e.modules={10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},29021:e=>{"use strict";e.exports=require("fs")},33873:e=>{"use strict";e.exports=require("path")},27910:e=>{"use strict";e.exports=require("stream")},79551:e=>{"use strict";e.exports=require("url")},74075:e=>{"use strict";e.exports=require("zlib")},83269:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>o.a,__next_app__:()=>p,pages:()=>u,routeModule:()=>c,tree:()=>d});var n=r(70260),s=r(28203),a=r(25155),o=r.n(a),i=r(67292),l={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);r.d(t,l);let d=["",{children:["(panel)",{children:["usuarios",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,31045)),"C:\\Users\\eleya\\Desktop\\develop\\Boston\\frontend\\src\\app\\(panel)\\usuarios\\page.jsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,78198)),"C:\\Users\\eleya\\Desktop\\develop\\Boston\\frontend\\src\\app\\(panel)\\layout.jsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,19937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,41485,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,62804)),"C:\\Users\\eleya\\Desktop\\develop\\Boston\\frontend\\src\\app\\layout.js"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,19937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,41485,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],u=["C:\\Users\\eleya\\Desktop\\develop\\Boston\\frontend\\src\\app\\(panel)\\usuarios\\page.jsx"],p={require:r,loadChunk:()=>Promise.resolve()},c=new n.AppPageRouteModule({definition:{kind:s.RouteKind.APP_PAGE,page:"/(panel)/usuarios/page",pathname:"/usuarios",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},81107:(e,t,r)=>{Promise.resolve().then(r.bind(r,78198))},18059:(e,t,r)=>{Promise.resolve().then(r.bind(r,39210))},73721:(e,t,r)=>{Promise.resolve().then(r.bind(r,31045))},10169:(e,t,r)=>{Promise.resolve().then(r.bind(r,46290))},39210:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>q});var n=r(45512),s=r(58009),a=r(92627),o=r(74167),i=r(20677),l=r(53333),d=r(26680),u=r(45916),p=r(38031),c=r(70510),m=r(37031),h=r(38884),x=r(20129),f=r(98745),v=r(93791),b=r(71066),j=r(62503),g=r(53088),y=r(75117),A=r(65846);function C({message:e=null,errorMessage:t=null,open:r}){let{setOpenSnackbar:s,setSnackbarMessage:a,setSnackbarErrorMessage:o}=(0,j.M)(),i=()=>{s(!1),a(""),o("")};return(0,n.jsx)(y.A,{open:r,autoHideDuration:6e3,onClose:i,anchorOrigin:{vertical:"bottom",horizontal:"center"},children:(0,n.jsx)(A.A,{onClose:i,severity:t?"error":"success",sx:{width:"100%"},children:t||e})})}function w(){return(0,n.jsx)(a.default,{direction:"row",alignItems:"center",spacing:2,children:(0,n.jsx)(o.default,{variant:"h6",children:"Boston"})})}function P(){let{selectedCompany:e,setSelectedCompany:t}=(0,j.M)(),{companiesInfo:r,fetchCompaniesToSelect:s,companyCreated:o}=(0,b.P)(),c=async e=>{try{t(e);let r=await fetch(`${g.A.API_URL}/companies/${e}`,{method:"GET",credentials:"include"});return await r.json()}catch(e){console.log("Fallo al buscar empresas:",e)}},h=(0,i.A)("(max-width:600px)");return(0,n.jsxs)(a.default,{direction:"row",alignItems:"center",spacing:2,children:[(0,n.jsxs)(l.A,{fullWidth:!0,size:"small",children:[(0,n.jsx)(d.A,{id:"company",children:"Empresa"}),(0,n.jsx)(u.A,{name:e,labelId:"company",id:"selectCompany",value:e||"",label:"Empresa",onChange:e=>{c(e.target.value)},sx:{width:h?"120px":"200px"},children:r.length>0?r.map(e=>(0,n.jsx)(p.A,{value:e.id,children:e.name},e.id)):(0,n.jsx)(p.A,{value:"",children:"No hay empresas disponibles"})})]}),(0,n.jsx)(m.H,{})]})}function _({toolbarButtonAction:e}){return(0,n.jsx)(h.s,{children:(0,n.jsx)(a.default,{children:e?(0,n.jsxs)(c.A,{variant:"contained",onClick:e.action,sx:{display:"flex",alignItems:"center",justifyContent:"flex-end",gap:1},children:[e.label,e.icon]}):null})})}function k(){let{toolbarButtonAction:e}=(0,j.M)(),t=(0,s.useCallback)(()=>(0,n.jsx)(_,{toolbarButtonAction:e}),[e]);return(0,n.jsx)(x.z,{slots:{toolbar:t}})}function q({children:e}){let t=(0,s.useCallback)(()=>(0,n.jsx)(k,{}),[]),{snackbarMessage:r,snackbarErrorMessage:a,openSnackbar:o}=(0,j.M)();return(0,n.jsx)(f.N,{defaultSidebarCollapsed:!0,slots:{appTitle:w,toolbarActions:P},children:(0,n.jsxs)(v.L,{slots:{header:t},children:[e,(0,n.jsx)(C,{open:o,message:r,errorMessage:a})]})})}},46290:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>b});var n=r(45512),s=r(58009),a=r(20677),o=r(30433),i=r(27319),l=r(74167),d=r(70510);(0,r(9189).A)((0,n.jsx)("path",{d:"M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m-9-2V8c0-.55-.45-1-1-1s-1 .45-1 1v2H2c-.55 0-1 .45-1 1s.45 1 1 1h2v2c0 .55.45 1 1 1s1-.45 1-1v-2h2c.55 0 1-.45 1-1s-.45-1-1-1zm9 4c-2.67 0-8 1.34-8 4v1c0 .55.45 1 1 1h14c.55 0 1-.45 1-1v-1c0-2.66-5.33-4-8-4"}),"PersonAddRounded");var u=r(2569),p=r(28982),c=r(68211),m=r(10821),h=r(52433),x=r(53088),f=r(62503),v=r(71066);function b(){let e=(0,c.A)(p.F),t=(0,a.A)("(max-width:600px)"),{setSnackbarErrorMessage:r,setToolbarButtonAction:b,setSnackbarMessage:j,snackbarMessage:g,snackbarErrorMessage:y,setOpenSnackbar:A}=(0,f.M)(),{companiesInfo:C}=(0,v.P)(),[w,P]=(0,s.useState)(!1),[_,k]=(0,s.useState)(!1),[q,D]=(0,s.useState)(!1),[M,E]=(0,s.useState)(!1),[G,N]=(0,s.useState)({}),[S,R]=(0,s.useState)({first_name:"",last_name:"",email:"",password:"",role_id:"",belongs_to:""}),z=[{name:"first_name",label:"Nombre",required:!0},{name:"last_name",label:"Apellido",required:!0},{name:"email",label:"Email",type:"email",required:!0},{name:"password",label:"Contrase\xf1a",type:"password",required:!0},{name:"role_id",label:"Rol",type:"select",required:!0,component:"select",options:q?q.map(e=>({id:e.id,label:e.name})):[{id:0,label:"No se encontraron roles"}]},{name:"belongs_to",label:"Pertenece a la empresa",type:"select",component:"select",options:C?C?.map(e=>({id:e.name,label:e.name})):[{id:0,label:"No se encontraron empresas"}]}],W=async()=>{N({});try{let e=await fetch(`${x.A.API_URL}/auth/register`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(S)});if(!e.ok){let t=await e.json();if(Array.isArray(t)){let e=t.reduce((e,t)=>(e[t.path[0]]=t.message,e),{});N(e)}else r(t.message||"Error desconocido");return}let t=await e.json();j(t.message),E(!0),P(!1);return}catch(e){r(e.message),console.error("Error al registrar: ",e)}},B=[{field:"id",headerName:"ID",minWidth:50},{field:"first_name",headerName:"Nombre",minWidth:150,flex:1},{field:"last_name",headerName:"Apellido",minWidth:150,flex:1},{field:"email",headerName:"Email",minWidth:200,flex:1},{field:"role_id",headerName:"Rol",minWidth:150,flex:1,renderCell:e=>{let t=q.find(t=>t.id===e.value);return t?t.name:"Desconocido"}},{field:"belongs_to",headerName:"Empresa",minWidth:150,flex:1}];return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(m.A,{theme:e,children:(0,n.jsx)(u.z,{columns:B,rows:_,getRowId:e=>e.id,getEstimatedRowHeight:()=>100,getRowHeight:()=>"auto",sx:{width:"100%","&.MuiDataGrid-root--densityCompact .MuiDataGrid-cell":{py:1},"&.MuiDataGrid-root--densityStandard .MuiDataGrid-cell":{py:"15px"},"&.MuiDataGrid-root--densityComfortable .MuiDataGrid-cell":{py:"22px"}}})}),(0,n.jsx)(o.A,{open:w,onClose:()=>{P(!1)},sx:{height:"100%"},children:(0,n.jsxs)(i.A,{elevation:4,square:!1,sx:{height:"90%",width:t?"90%":"50%",display:"flex",flexDirection:"column",p:2,gap:2,maxWidth:500,maxHeight:600,overflowY:"auto",scrollbarWidth:"thin",position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},children:[(0,n.jsx)(l.default,{variant:"h4",children:"Crear nuevo usuario"}),(0,n.jsx)(h.A,{fields:z,values:S,errors:G,onChange:(e,t)=>{R(r=>({...r,[e]:t}))}}),(0,n.jsx)(d.A,{variant:"contained",onClick:W,children:"Crear usuario"})]})})]})}},52433:(e,t,r)=>{"use strict";r.d(t,{A:()=>b});var n=r(45512),s=r(58009),a=r(51323),o=r(92627),i=r(53333),l=r(26680),d=r(45916),u=r(38031),p=r(46720),c=r(35357),m=r(70510),h=r(74167),x=r(11895),f=r(55648),v=r(65601);function b({fields:e,values:t={},onChange:r,errors:b={},successMessage:j,errorMessage:g}){let[y,A]=(0,s.useState)(!1);return(0,n.jsx)(a.default,{component:"form",sx:{height:"100%",width:"100%",margin:"0 auto",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:(0,n.jsxs)(o.default,{spacing:2,sx:{mt:2},children:[e.map((e,s)=>(0,n.jsx)(o.default,{children:(()=>{switch(e.component){case"select":return(0,n.jsxs)(i.A,{fullWidth:!0,children:[(0,n.jsx)(l.A,{children:e.label}),(0,n.jsx)(d.A,{name:e.name,label:e.label,value:t[e.name]||"",onChange:t=>r(e.name,t.target.value),required:e.required??!1,children:e.options?.map((e,t)=>n.jsx(u.A,{value:e.id,children:e.label},e.id??t))}),b&&b[e.name]&&(0,n.jsx)(p.A,{children:b[e.name]})]});case"date":return(0,n.jsx)(x.l,{label:e.label,value:t[e.name]??null,defaultValue:"",onChange:t=>r(e.name,t?t.toString():""),slotProps:{textField:{error:!!b[e.name],helperText:b[e.name]??""}}});default:return(0,n.jsx)(c.A,{fullWidth:!0,type:y?"text":e.type??"text",label:e.label,name:e.name,required:e.required??!1,value:t[e.name]??"",onChange:t=>r(e.name,t.target.value),error:!!b[e.name],helperText:b[e.name]??"",slotProps:{input:{endAdornment:"password"===e.type&&(0,n.jsx)(m.A,{onClick:()=>A(!y),children:y?(0,n.jsx)(f.A,{}):(0,n.jsx)(v.A,{})})}}})}})()},e.name??s)),(0,n.jsx)(h.default,{children:j}),(0,n.jsx)(h.default,{children:g})]})})}},78198:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});let n=(0,r(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\eleya\\\\Desktop\\\\develop\\\\Boston\\\\frontend\\\\src\\\\app\\\\(panel)\\\\layout.jsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\eleya\\Desktop\\develop\\Boston\\frontend\\src\\app\\(panel)\\layout.jsx","default")},31045:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});let n=(0,r(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\eleya\\\\Desktop\\\\develop\\\\Boston\\\\frontend\\\\src\\\\app\\\\(panel)\\\\usuarios\\\\page.jsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\eleya\\Desktop\\develop\\Boston\\frontend\\src\\app\\(panel)\\usuarios\\page.jsx","default")},70440:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});var n=r(88077);let s=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,n.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[638,894,77,19,87,174,390,88],()=>r(83269));module.exports=n})();