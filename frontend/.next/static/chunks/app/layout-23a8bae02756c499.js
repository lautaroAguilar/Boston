(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{41226:()=>{},35947:(e,t,r)=>{Promise.resolve().then(r.bind(r,1528)),Promise.resolve().then(r.bind(r,72234)),Promise.resolve().then(r.bind(r,81332)),Promise.resolve().then(r.bind(r,85734)),Promise.resolve().then(r.bind(r,97869)),Promise.resolve().then(r.bind(r,36743)),Promise.resolve().then(r.bind(r,98358)),Promise.resolve().then(r.bind(r,16269)),Promise.resolve().then(r.bind(r,68998)),Promise.resolve().then(r.bind(r,54255)),Promise.resolve().then(r.bind(r,86542)),Promise.resolve().then(r.t.bind(r,94917,23)),Promise.resolve().then(r.t.bind(r,65455,23)),Promise.resolve().then(r.bind(r,39795))},39795:(e,t,r)=>{"use strict";r.d(t,{default:()=>f});var n=r(95155),s=r(12115),a=r(76046),o=r(44026);let l=(0,s.createContext)(),c=e=>{let{children:t}=e,[r,c]=(0,s.useState)(null),[i,u]=(0,s.useState)(null),[d,h]=(0,s.useState)(!0),[m,P]=(0,s.useState)(""),f=(0,a.useRouter)(),v=async()=>{try{h(!0);let e=await fetch("".concat(o.A.API_URL,"/auth/me"),{method:"GET",credentials:"include"});if(401===e.status)return await b();let t=await e.json();c(t),t&&t.userId&&await y(t.userId)}catch(e){console.error("Error comprobando sesi\xf3n:",e),c(null)}finally{h(!1)}},b=async()=>{try{let e=await fetch("".concat(o.A.API_URL,"/auth/refresh"),{method:"POST",credentials:"include"});if(401===e.status||403===e.status)return c(null),f.push("/autenticacion"),null;await e.json();let t=window.location.pathname;return("/autenticacion"===t||"/"===t)&&f.push("/inicio"),await v()}catch(e){return console.error("Error al refrescar token:",e),null}},j=async()=>{try{h(!0);let e=await fetch("".concat(o.A.API_URL,"/auth/logout"),{method:"POST",credentials:"include"});e.ok&&(e.json(),c(null),f.push("/autenticacion"))}catch(e){console.error(e)}finally{h(!1)}},y=async e=>{try{let t=await fetch("".concat(o.A.API_URL,"/user/").concat(e),{credentials:"include"});if(!t.ok){let e=await t.json();P(e.error),j()}let r=await t.json();u(r)}catch(e){console.log(e)}};return(0,s.useEffect)(()=>{v()},[]),(0,n.jsx)(l.Provider,{value:{user:r,userInfo:i,loading:d,logout:j,errorMessage:m,checkUserSession:v},children:t})};var i=r(16118),u=r(72971),d=r(16761),h=r(67663),m=r(16847);function P(e){let{children:t}=e;return(0,n.jsx)(h.$,{dateAdapter:m.R,children:t})}function f(e){let{children:t}=e;return(0,n.jsx)(c,{children:(0,n.jsx)(u.q,{children:(0,n.jsx)(i.J,{children:(0,n.jsx)(d.N,{children:(0,n.jsx)(P,{children:(0,n.jsx)(s.Suspense,{fallback:(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("p",{children:"Cargando..."})}),children:t})})})})})})}},16761:(e,t,r)=>{"use strict";r.d(t,{N:()=>c,j:()=>i});var n=r(95155),s=r(12115),a=r(44026),o=r(72971);let l=(0,s.createContext)(),c=e=>{let{children:t}=e,{setSnackbarErrorMessage:r,setSnackbarMessage:c,selectedCompany:i}=(0,o.M)(),[u,d]=(0,s.useState)([]),[h,m]=(0,s.useState)(!1),[P,f]=(0,s.useState)(null),v=async e=>{try{let t=await fetch("".concat(a.A.API_URL,"/students"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),n=t.json();if(!t.ok){if(Array.isArray(n)){let e=n.reduce((e,t)=>(e[t.path[0]]=t.message,e),{});setFormErrors(e)}else r(n.error);return}return c("Alumno creado correctamente"),m(e=>!e),n}catch(e){console.log("Error de red al crear estudiante:",e)}},b=async()=>{try{let e=await fetch("".concat(a.A.API_URL,"/students?companyId=").concat(i),{method:"GET",credentials:"include"}),t=await e.json();e.ok||r(t.message),d(t)}catch(e){console.log("Error de red al buscar estudiantes:",e)}};return(0,n.jsx)(l.Provider,{value:{students:u,errorMessage:P,updated:h,createStudent:v,fetchStudents:b},children:t})},i=()=>(0,s.useContext)(l)}},e=>{var t=t=>e(e.s=t);e.O(0,[815,120,539,392,255,343,991,118,441,517,358],()=>t(35947)),_N_E=e.O()}]);