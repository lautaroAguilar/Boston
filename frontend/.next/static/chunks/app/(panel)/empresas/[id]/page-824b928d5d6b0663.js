(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[822],{18697:(e,t,l)=>{Promise.resolve().then(l.bind(l,1606))},1606:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>N});var n=l(95155),r=l(12115),a=l(64665),o=l(63551),i=l(68998),s=l(9561),d=l(10979),c=l(22282),u=l(42479),x=l(72926),m=l(35761),v=l(79545),p=l(34862),h=l(73999),f=l(15649),j=l(450),y=l(76046),b=l(16118),g=l(72971),C=l(58671),A=l(36417),k=l(27753),_=l(26214),E=l(32371);function w(e){let{isOpen:t,onClose:l,title:a,fields:o,values:i,onSubmit:s,errorMessage:d}=e,[u,x]=(0,r.useState)(i||{});(0,r.useEffect)(()=>{x(i||{})},[i]);let m=async()=>{await s(u),l()};return(0,n.jsxs)(C.A,{open:t,onClose:l,fullWidth:!0,children:[(0,n.jsx)(A.A,{children:a}),(0,n.jsx)(k.A,{children:(0,n.jsx)(E.A,{fields:o,values:u,onChange:(e,t)=>{x(l=>({...l,[e]:t}))},onSubmit:m,errorMessage:d})}),(0,n.jsxs)(_.A,{sx:{padding:3},children:[(0,n.jsx)(c.A,{onClick:l,children:"Cancelar"}),(0,n.jsx)(c.A,{onClick:m,variant:"contained",color:"primary",children:"Confirmar"})]})]})}var S=l(75131);function D(e){let{isOpen:t,onClose:l,onConfirm:r,title:a,message:o,confirmText:i="Eliminar",confirmColor:s="error"}=e;return(0,n.jsxs)(C.A,{open:t,onClose:l,children:[(0,n.jsx)(A.A,{children:a}),(0,n.jsx)(k.A,{children:(0,n.jsx)(S.A,{children:o})}),(0,n.jsxs)(_.A,{children:[(0,n.jsx)(c.A,{onClick:l,color:"primary",children:"Cancelar"}),(0,n.jsx)(c.A,{onClick:r,color:s,children:i})]})]})}function N(){var e,t;let{id:l}=(0,y.useParams)(),{fetchCompany:C,fetchCostCenters:A,fetchContacts:k,fetchSectors:_,updateCompany:E,deleteCompany:S,errorMessage:N,handleSubmitCostCenter:I,updateCostCenter:W,deleteCostCenter:R,handleSubmitContact:z,updateContact:T,deleteContact:q,handleSubmitSector:H,updateSector:M,deleteSector:P,updated:O}=(0,b.P)(),{setToolbarButtonAction:F,setOpenSnackbar:L,snackbarMessage:U,snackbarErrorMessage:V}=(0,g.M)(),B=(0,m.A)(),[G,J]=(0,r.useState)(null),[K,Q]=(0,r.useState)(!1),[X,Y]=(0,r.useState)(!1),[Z,$]=(0,r.useState)(null),[ee,et]=(0,r.useState)(null);async function el(e){try{let t=await C(e),l=await A(e),n=await k(e),r=await _(e),a={...t,costCenters:l,contacts:n,sectors:r};console.log(a),J(a)}catch(e){console.error("Error fetching company data:",e)}}let en={company:{title:"Editar Empresa",fields:[{name:"name",label:"Nombre"},{name:"business_name",label:"Raz\xf3n Social"},{name:"cuit",label:"CUIT",type:"number"},{name:"first_survey_link",label:"Primer encuesta"},{name:"second_survey_link",label:"Segunda encuesta"}],values:e=>({name:(null==e?void 0:e.name)||"",business_name:(null==e?void 0:e.business_name)||"",cuit:(null==e?void 0:e.cuit)||"",first_survey_link:(null==e?void 0:e.first_survey_link)||"",second_survey_link:(null==e?void 0:e.second_survey_link)||""}),onSubmit:e=>{E(e,l)},onDelete:async()=>{await S(G.id)},deleteTitle:"Eliminar Empresa",deleteMessage:"\xbfEst\xe1s seguro de que deseas eliminar esta empresa? Esta acci\xf3n es irreversible."},costCenter:{title:"Editar Centro de Costo",fields:[{name:"name",label:"Centro de Costo"}],values:(e,t)=>{var l;return{name:(null==e?void 0:null===(l=e.costCenters[t])||void 0===l?void 0:l.cost_center_name)||""}},onSubmit:async(e,t)=>{var l;let n=null==G?void 0:G.id,r=null==G?void 0:null===(l=G.costCenters[t])||void 0===l?void 0:l.cost_center_id;if(!n||!r){console.error("Error: No se encontr\xf3 el ID del centro de costo.");return}await W(e,n,r)},onDelete:async e=>{var t;let l=null==G?void 0:G.id,n=null==G?void 0:null===(t=G.costCenters[e])||void 0===t?void 0:t.cost_center_id;if(!l||!n){console.error("Error: No se encontr\xf3 el ID del centro de costo.");return}await R(l,n)},deleteTitle:"Eliminar centro de costo",deleteMessage:"\xbfEst\xe1s seguro de que deseas eliminar este centro de costo? Esta acci\xf3n es irreversible."},addCostCenter:{title:"Agregar centro de costo",fields:[{name:"name",label:"Nombre del centro de costo"}],values:()=>({name:""}),onSubmit:async e=>{let t=null==G?void 0:G.id;if(!t){console.error("Error: No se encontr\xf3 el ID de la empresa.");return}await I(e,t)}},contact:{title:"Editar Contacto",fields:[{name:"name",label:"Nombre de Contacto"},{name:"email",label:"Email de Contacto",type:"email"},{name:"notes",label:"Comentarios"}],values:(e,t)=>{var l,n,r;return{name:(null==e?void 0:null===(l=e.contacts[t])||void 0===l?void 0:l.contact_name)||"",email:(null==e?void 0:null===(n=e.contacts[t])||void 0===n?void 0:n.contact_email)||"",notes:(null==e?void 0:null===(r=e.contacts[t])||void 0===r?void 0:r.contact_notes)||""}},onSubmit:async(e,t)=>{var l;let n=null==G?void 0:G.id,r=null==G?void 0:null===(l=G.contacts[t])||void 0===l?void 0:l.contact_id;if(!n||!r){console.error("Error: No se encontr\xf3 el ID del contacto.");return}console.log("Datos a enviar:",e),await T(e,n,r)},onDelete:async e=>{var t;let l=null==G?void 0:G.id,n=null==G?void 0:null===(t=G.contacts[e])||void 0===t?void 0:t.contact_id;if(!l||!n){console.error("Error: No se encontr\xf3 el ID del contacto.");return}await q(l,n)},deleteTitle:"Eliminar contacto",deleteMessage:"\xbfEst\xe1s seguro de que deseas eliminar este contacto? Esta acci\xf3n es irreversible."},addContact:{title:"Agregar Contacto",fields:[{name:"name",label:"Nombre de Contacto"},{name:"email",label:"Email de Contacto",type:"email"},{name:"notes",label:"Comentarios"}],values:()=>({name:"",email:"",notes:""}),onSubmit:async e=>{let t=null==G?void 0:G.id;if(!t){console.error("Error: No se encontr\xf3 el ID de la empresa.");return}await z(e,t)}},sector:{title:"Editar Sector",fields:[{name:"name",label:"Sector"}],values:(e,t)=>{var l;return{name:(null==e?void 0:null===(l=e.sectors[t])||void 0===l?void 0:l.sector_name)||""}},onSubmit:async(e,t)=>{var l;let n=null==G?void 0:G.id,r=null==G?void 0:null===(l=G.sectors[t])||void 0===l?void 0:l.sector_id;if(!n||!r){console.error("Error: No se encontr\xf3 el ID del sector.");return}await M(e,n,r)},onDelete:async e=>{var t;let l=null==G?void 0:G.id,n=null==G?void 0:null===(t=G.sectors[e])||void 0===t?void 0:t.sector_id;if(!l||!n){console.error("Error: No se encontr\xf3 el ID del sector.");return}await P(l,n)},deleteTitle:"Eliminar sector",deleteMessage:"\xbfEst\xe1s seguro de que deseas eliminar este sector? Esta acci\xf3n es irreversible."},addSector:{title:"Agregar Sector",fields:[{name:"name",label:"Nombre del Sector"}],values:()=>({name:""}),onSubmit:async e=>{let t=null==G?void 0:G.id;if(!t){console.error("Error: No se encontr\xf3 el ID de la empresa.");return}await H(e,t)}}},er=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;$(e),et(t),Y(!0)},ea=()=>{Y(!1),et(null)},eo=async()=>{var e;(null===(e=en[Z])||void 0===e?void 0:e.onDelete)&&(null!==ee?await en[Z].onDelete(ee):await en[Z].onDelete()),ea()},ei=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;$(e),et(t),Q(!0)};return(0,r.useEffect)(()=>{el(l)},[O]),(0,r.useEffect)(()=>{(U||V)&&L(!0)},[U,V]),(0,r.useEffect)(()=>{F(null)},[F]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.A,{sx:{maxWidth:1200,width:"100%",p:2,backgroundColor:"dark"===B.palette.mode?B.palette.grey[900]:B.palette.grey[50],border:"1px solid ".concat("dark"===B.palette.mode?B.palette.grey[800]:B.palette.grey[300],",")},elevation:0,children:(null==G?void 0:G.error)?"No se encontr\xf3 la empresa":(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.A,{title:(0,n.jsxs)(i.default,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,n.jsx)(s.default,{variant:"h4",component:"div",children:null==G?void 0:G.name}),(0,n.jsxs)(d.default,{direction:"row",spacing:1,children:[(0,n.jsx)(c.A,{variant:"outlined",startIcon:(0,n.jsx)(j.A,{}),color:"error",size:"small",onClick:()=>er("company"),children:"ELIMINAR"}),(0,n.jsx)(c.A,{variant:"contained",startIcon:(0,n.jsx)(v.A,{}),onClick:()=>ei("company"),size:"small",children:"EDITAR"})]})]})}),(0,n.jsx)(u.A,{children:(0,n.jsxs)(d.default,{spacing:2,children:[(0,n.jsxs)(i.default,{display:"flex",justifyContent:"space-between",sx:{backgroundColor:"dark"===B.palette.mode?B.palette.grey[800]:B.palette.grey[200],p:1,borderRadius:1},children:[(0,n.jsx)(s.default,{variant:"body1",color:"text.secondary",children:"Raz\xf3n social"}),(0,n.jsx)(s.default,{variant:"body1",children:null==G?void 0:G.business_name})]}),(0,n.jsxs)(i.default,{display:"flex",justifyContent:"space-between",sx:{backgroundColor:"dark"===B.palette.mode?B.palette.grey[800]:B.palette.grey[200],p:1,borderRadius:1},children:[(0,n.jsx)(s.default,{variant:"body1",color:"text.secondary",children:"CUIT"}),(0,n.jsx)(s.default,{variant:"body1",children:null==G?void 0:G.cuit})]}),(0,n.jsxs)(i.default,{display:"flex",justifyContent:"space-between",sx:{backgroundColor:"dark"===B.palette.mode?B.palette.grey[800]:B.palette.grey[200],p:1,borderRadius:1},children:[(0,n.jsx)(s.default,{variant:"body1",color:"text.secondary",children:"Link de la primera encuesta"}),(null==G?void 0:G.first_survey_link)?(0,n.jsx)(s.default,{variant:"body1",children:null==G?void 0:G.first_survey_link}):(0,n.jsx)(s.default,{variant:"body1",color:"text.secondary",children:"No se encontr\xf3 la encuesta"})]}),(0,n.jsxs)(i.default,{display:"flex",justifyContent:"space-between",sx:{backgroundColor:"dark"===B.palette.mode?B.palette.grey[800]:B.palette.grey[200],p:1,borderRadius:1},children:[(0,n.jsx)(s.default,{variant:"body1",color:"text.secondary",children:"Link de la segunda encuesta"}),(null==G?void 0:G.second_survey_link)?(0,n.jsx)(s.default,{variant:"body1",children:null==G?void 0:G.second_survey_link}):(0,n.jsx)(s.default,{variant:"body1",color:"text.secondary",children:"No se encontr\xf3 la encuesta"})]}),(0,n.jsxs)(i.default,{display:"flex",justifyContent:"space-between",sx:{backgroundColor:"dark"===B.palette.mode?B.palette.grey[800]:B.palette.grey[200],p:1,borderRadius:1},children:[(0,n.jsx)(s.default,{variant:"body1",color:"text.secondary",children:"Centros de costo"}),(0,n.jsx)(d.default,{spacing:1,children:Array.isArray(null==G?void 0:G.costCenters)?G.costCenters.map((e,t)=>(0,n.jsxs)(d.default,{sx:{minWidth:350,flex:!0,flexDirection:"row",alignItems:"center",justifyContent:"space-between",background:"dark"===B.palette.mode?B.palette.grey[700]:B.palette.grey[300],p:1,borderRadius:1},children:[(0,n.jsx)(s.default,{variant:"body1",children:e.cost_center_name},t),(0,n.jsxs)(d.default,{flexDirection:"row",children:[(0,n.jsx)(x.A,{title:"Editar",children:(0,n.jsx)(c.A,{onClick:()=>ei("costCenter",t),size:"small",sx:{minWidth:"30px",minHeight:"30px"},children:(0,n.jsx)(p.A,{})})}),(0,n.jsx)(x.A,{title:"Agregar",children:(0,n.jsx)(c.A,{onClick:()=>ei("addCostCenter",t),size:"small",sx:{minWidth:"30px",minHeight:"30px"},color:"success",children:(0,n.jsx)(h.A,{})})}),(0,n.jsx)(x.A,{title:"Eliminar",children:(0,n.jsx)(c.A,{onClick:()=>er("costCenter",t),size:"small",sx:{minWidth:"30px",minHeight:"30px"},color:"error",children:(0,n.jsx)(f.A,{})})})]})]},t)):(0,n.jsx)(s.default,{variant:"body1",color:"text.secondary",children:"No se encontraron centros de costo"})})]}),(0,n.jsxs)(i.default,{display:"flex",justifyContent:"space-between",sx:{backgroundColor:"dark"===B.palette.mode?B.palette.grey[800]:B.palette.grey[200],p:1,borderRadius:1},children:[(0,n.jsx)(s.default,{variant:"body1",color:"text.secondary",children:"Sectores"}),(0,n.jsx)(d.default,{spacing:1,children:Array.isArray(null==G?void 0:G.sectors)?G.sectors.map((e,t)=>(0,n.jsxs)(d.default,{sx:{minWidth:350,flex:!0,flexDirection:"row",alignItems:"center",justifyContent:"space-between",background:"dark"===B.palette.mode?B.palette.grey[700]:B.palette.grey[300],p:1,borderRadius:1},children:[(0,n.jsx)(s.default,{variant:"body1",children:e.sector_name},t),(0,n.jsxs)(d.default,{flexDirection:"row",children:[(0,n.jsx)(x.A,{title:"Editar",children:(0,n.jsx)(c.A,{onClick:()=>ei("sector",t),size:"small",sx:{minWidth:"30px",minHeight:"30px"},children:(0,n.jsx)(p.A,{})})}),(0,n.jsx)(x.A,{title:"Agregar",children:(0,n.jsx)(c.A,{onClick:()=>ei("addSector",t),size:"small",sx:{minWidth:"30px",minHeight:"30px"},color:"success",children:(0,n.jsx)(h.A,{})})}),(0,n.jsx)(x.A,{title:"Eliminar",children:(0,n.jsx)(c.A,{onClick:()=>er("sector",t),size:"small",sx:{minWidth:"30px",minHeight:"30px"},color:"error",children:(0,n.jsx)(f.A,{})})})]})]},t)):(0,n.jsx)(s.default,{variant:"body1",color:"text.secondary",children:"No se encontraron sectores"})})]}),(0,n.jsxs)(i.default,{display:"flex",justifyContent:"space-between",sx:{backgroundColor:"dark"===B.palette.mode?B.palette.grey[800]:B.palette.grey[200],p:1,borderRadius:1},children:[(0,n.jsx)(s.default,{variant:"body1",color:"text.secondary",children:"Contactos"}),(0,n.jsx)(d.default,{spacing:1,children:Array.isArray(null==G?void 0:G.contacts)?null==G?void 0:G.contacts.map((e,t)=>(0,n.jsxs)(d.default,{sx:{minWidth:350,flex:!0,flexDirection:"row",alignItems:"center",justifyContent:"space-between",background:"dark"===B.palette.mode?B.palette.grey[700]:B.palette.grey[300],p:1,borderRadius:1},children:[(0,n.jsxs)(i.default,{children:[(0,n.jsx)(s.default,{variant:"body1",children:e.contact_name}),(0,n.jsx)(s.default,{variant:"body2",children:e.contact_email}),(0,n.jsx)(s.default,{variant:"body2",children:e.contact_notes})]},e.contact_id),(0,n.jsxs)(d.default,{flexDirection:"row",children:[(0,n.jsx)(x.A,{title:"Editar",children:(0,n.jsx)(c.A,{onClick:()=>ei("contact",t),size:"small",sx:{minWidth:"30px",minHeight:"30px"},children:(0,n.jsx)(p.A,{})})}),(0,n.jsx)(x.A,{title:"Agregar",children:(0,n.jsx)(c.A,{onClick:()=>ei("addContact",t),size:"small",sx:{minWidth:"30px",minHeight:"30px"},color:"success",children:(0,n.jsx)(h.A,{})})}),(0,n.jsx)(x.A,{title:"Eliminar",children:(0,n.jsx)(c.A,{onClick:()=>er("contact",t),size:"small",sx:{minWidth:"30px",minHeight:"30px"},color:"error",children:(0,n.jsx)(f.A,{})})})]})]},t)):(0,n.jsx)(s.default,{variant:"body1",color:"text.secondary",children:"No se encontraron contactos"})})]})]})})]})}),Z&&(0,n.jsx)(w,{isOpen:K,onClose:()=>{Q(!1),et(null)},title:en[Z].title,fields:en[Z].fields,values:en[Z].values(G,ee),onSubmit:e=>en[Z].onSubmit(e,ee)}),(0,n.jsx)(D,{isOpen:X,onClose:ea,onConfirm:eo,title:(null===(e=en[Z])||void 0===e?void 0:e.deleteTitle)||"Eliminar",message:(null===(t=en[Z])||void 0===t?void 0:t.deleteMessage)||"\xbfEst\xe1s seguro de que deseas eliminar este elemento? Esta acci\xf3n es irreversible."})]})}},32371:(e,t,l)=>{"use strict";l.d(t,{A:()=>j});var n=l(95155),r=l(12115),a=l(68998),o=l(10979),i=l(22678),s=l(90507),d=l(83774),c=l(91888),u=l(16508),x=l(39905),m=l(22282),v=l(9561),p=l(20719),h=l(31798),f=l(9313);function j(e){let{fields:t,values:l={},onChange:j,errors:y={},successMessage:b,errorMessage:g}=e,[C,A]=(0,r.useState)(!1);return(0,n.jsx)(a.default,{component:"form",sx:{height:"100%",width:"100%",margin:"0 auto",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:(0,n.jsxs)(o.default,{spacing:2,sx:{mt:2},children:[t.map((e,t)=>{var r;return(0,n.jsx)(o.default,{children:(()=>{var t,r,a,o,v,b,g,k;switch(e.component){case"select":return(0,n.jsxs)(i.A,{fullWidth:!0,children:[(0,n.jsx)(s.A,{children:e.label}),(0,n.jsx)(d.A,{name:e.name,label:e.label,value:l[e.name]||"",onChange:t=>j(e.name,t.target.value),required:null!==(r=e.required)&&void 0!==r&&r,children:null===(t=e.options)||void 0===t?void 0:t.map((e,t)=>{var l;return(0,n.jsx)(c.A,{value:e.id,children:e.label},null!==(l=e.id)&&void 0!==l?l:t)})}),y&&y[e.name]&&(0,n.jsx)(u.A,{children:y[e.name]})]});case"date":return(0,n.jsx)(p.l,{label:e.label,value:null!==(a=l[e.name])&&void 0!==a?a:null,defaultValue:"",onChange:t=>j(e.name,t?t.toString():""),slotProps:{textField:{error:!!y[e.name],helperText:null!==(o=y[e.name])&&void 0!==o?o:""}}});default:return(0,n.jsx)(x.A,{fullWidth:!0,type:C?"text":null!==(v=e.type)&&void 0!==v?v:"text",label:e.label,name:e.name,required:null!==(b=e.required)&&void 0!==b&&b,value:null!==(g=l[e.name])&&void 0!==g?g:"",onChange:t=>j(e.name,t.target.value),error:!!y[e.name],helperText:null!==(k=y[e.name])&&void 0!==k?k:"",slotProps:{input:{endAdornment:"password"===e.type&&(0,n.jsx)(m.A,{onClick:()=>A(!C),children:C?(0,n.jsx)(h.A,{}):(0,n.jsx)(f.A,{})})}}})}})()},null!==(r=e.name)&&void 0!==r?r:t)}),(0,n.jsx)(v.default,{children:b}),(0,n.jsx)(v.default,{children:g})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[120,735,539,85,724,926,803,118,441,517,358],()=>t(18697)),_N_E=e.O()}]);